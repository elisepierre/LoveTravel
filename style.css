/* --- VARIABLES --- */
:root {
    --pink: #ff9eb5; 
    --pink-dark: #ff4b6e;
    --blue: #8ecae6; 
    --blue-dark: #219ebc;
    --bg-body: #fffbf0; 
    --bg-card: #ffffff;
    --text-main: #4a4a4a; 
    --text-sub: #888888;
    --border: #eeeeee; 
    --input-bg: #fafafa;
    --shadow: rgba(0,0,0,0.05); 
    --dot-pattern: #ffe4e1;
    --voyage-border: linear-gradient(135deg, var(--blue), var(--pink));
    --p-shadow: rgba(0,0,0,0.2);
    /* UNO */
    --uno-red: #ffadad; --uno-blue: #a0c4ff; --uno-green: #caffbf; --uno-yellow: #fdffb6; --uno-black: #555;
}

/* --- BASE & DARK MODE --- */
body.dark-mode {
    --bg-body: #121212; --bg-card: #1e1e1e;
    --text-main: #e0e0e0; --text-sub: #aaaaaa;
    --border: #333333; --input-bg: #2c2c2c;
    --shadow: rgba(0,0,0,0.5); --dot-pattern: rgba(255,255,255,0.05);
    --p-shadow: rgba(0,0,0,0.5);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
body { 
    margin: 0; font-family: 'Outfit', sans-serif; 
    background-color: var(--bg-body); 
    background-image: radial-gradient(var(--dot-pattern) 1px, transparent 1px); 
    background-size: 20px 20px; color: var(--text-main); 
    padding-bottom: 120px; transition: background 0.3s, color 0.3s; 
}

/* --- THEMES SPECIAUX --- */
body.birthday-theme {
    background-color: #fffdf5;
    background-image: radial-gradient(#ff9eb5 2px, transparent 2px), radial-gradient(#8ecae6 2px, transparent 2px);
    background-size: 40px 40px; background-position: 0 0, 20px 20px;
}
body.dark-mode.birthday-theme {
    background-color: #151010;
    background-image: radial-gradient(#ff4b6e 2px, transparent 2px), radial-gradient(#219ebc 2px, transparent 2px);
}
body.love-theme {
    background-color: #fff0f5; 
    background-image: radial-gradient(circle, #ffbcd9 20%, transparent 20%), radial-gradient(circle, #ffbcd9 20%, transparent 20%);
    background-size: 50px 50px; background-position: 0 0, 25px 25px;
}
body.dark-mode.love-theme {
    background-color: #2d0a12;
    background-image: radial-gradient(circle, #800020 20%, transparent 20%), radial-gradient(circle, #800020 20%, transparent 20%);
}
body.is-sleeping::after {
    content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(10, 10, 20, 0.4); pointer-events: none; z-index: 9990;
    backdrop-filter: grayscale(0.5); transition: 0.5s;
}

/* --- MODE HOT (Burning) --- */
body.is-burning {
    background: linear-gradient(-45deg, #ffc3a0, #ffafbd, #ffc3a0);
    background-size: 400% 400%; color: #5e2a35;
    animation: gradientBG 15s ease infinite;
}
body.is-burning::before { content: "üî•"; position: fixed; bottom: -50px; left: 10%; font-size: 2rem; opacity: 0; z-index: 0; filter: blur(1px); animation: riseUp 5s infinite ease-in; }
body.is-burning::after { content: "‚ù§Ô∏è"; position: fixed; bottom: -50px; right: 20%; font-size: 1.5rem; opacity: 0; z-index: 0; filter: blur(1px); animation: riseUp 6s 2s infinite ease-in; }
body.dark-mode.is-burning { background: linear-gradient(-45deg, #4a0e16, #751a2a, #4a0e16); color: #ffccd5; }

/* --- HEADER --- */
header { display: flex; flex-direction: column; align-items: center; padding: 20px 20px 10px 20px; margin-bottom: 10px; }
.header-top { display: flex; justify-content: space-between; width: 100%; align-items: center; }
.header-btn { background: var(--bg-card); border: 1px solid var(--border); width: 45px; height: 45px; border-radius: 50%; color: var(--text-main); display: flex; align-items: center; justify-content: center; font-size: 1.4rem; cursor: pointer; box-shadow: 0 4px 10px var(--shadow); transition: 0.2s; }
.app-title { font-family: 'Pacifico', cursive; font-size: 2.2rem; margin: 0; background: linear-gradient(to right, var(--blue-dark), var(--pink-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 2px 0px rgba(255,255,255,0.2)); padding: 0 10px; line-height: 1.3; }
.bd-subtitle { font-family: 'Dancing Script', cursive; font-size: 1.3rem; color: var(--pink-dark); margin-top: 5px; display: none; font-weight: bold; background: var(--bg-card); padding: 5px 20px; border-radius: 20px; box-shadow: 0 4px 10px var(--shadow); border: 1px solid var(--pink); transform: rotate(-2deg); z-index: 10; text-align: center; }

/* --- CONTAINERS & CARDS --- */
.container { max-width: 600px; margin: 0 auto; padding: 0 20px; }
.card { background: var(--bg-card); border-radius: 25px; padding: 25px; margin-bottom: 20px; box-shadow: 0 10px 25px var(--shadow); border: 1px solid var(--border); transition: 0.3s; overflow: hidden; }
.card.voyage-card { padding: 25px 20px; }
body.is-burning .card { background: rgba(255, 255, 255, 0.85); border: 1px solid #ffc3a0; box-shadow: 0 10px 30px rgba(255, 175, 189, 0.4); }
body.dark-mode.is-burning .card { background: rgba(40, 10, 15, 0.9); border-color: #751a2a; }

.card-title { font-size: 1.1rem; font-weight: 800; color: var(--text-main); margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 2px dashed var(--border); padding-bottom: 10px; display: flex; align-items: center; justify-content: space-between; gap: 10px; cursor: pointer; user-select: none; }
.card-head-wrap { display: flex; align-items: center; gap: 10px; }
.card-title.toggleable::after { content: '‚ñº'; font-size: 0.8rem; color: var(--text-sub); transition: transform 0.3s ease; }
.card-title.closed::after { transform: rotate(-90deg); }
.card-title.closed { margin-bottom: 0; border-bottom: none; padding-bottom: 0; }

/* --- INPUTS & BUTTONS --- */
.input-group { display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
.input-field { flex: 1; min-width: 120px; padding: 12px; border: 2px solid var(--border); border-radius: 12px; font-family: 'Outfit'; outline: none; background: var(--input-bg); color: var(--text-main); }
.text-area { width: 100%; height: 80px; resize: none; margin-bottom: 15px; }
.date-input { width: 130px; font-size: 0.75rem; }
.input-white { background: white; }
.btn-action { background: var(--blue-dark); color: white; border: none; padding: 0 20px; border-radius: 12px; font-weight: bold; cursor: pointer; height: 45px; }
.btn-action:disabled { opacity: 0.5; cursor: not-allowed; background: var(--text-sub); }
.action-pink { background: var(--pink-dark); }
.small-btn { width: 50px; }
.small-input { width: 80px; }
.full-width { width: 100%; }
.blue-btn { background: var(--blue-dark); }
.blue-bg { background: var(--blue-dark); }
.orange-bg { background: #e67e22; }
.pink-btn { background: var(--pink-dark); box-shadow: 0 4px 10px rgba(255, 75, 110, 0.3); width: 100%; }
.neutral-btn { background: var(--input-bg); color: var(--text-main); border: 1px solid var(--border); width: 100%; }
.link-cancel { margin-top: 15px; background: none; border: none; color: var(--text-sub); text-decoration: underline; cursor: pointer; }
.gradient-btn { background: linear-gradient(135deg, var(--pink), var(--pink-dark)); border-radius: 20px; }

/* --- VOYAGE & METEO --- */
.journey-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.journey-col { position: relative; border-radius: 12px; padding: 8px 5px; transition: background 0.5s ease; overflow: hidden; }
.journey-col span { position: relative; z-index: 2; text-shadow: 0 1px 2px rgba(255,255,255,0.8); }
body.dark-mode .journey-col span { text-shadow: 0 1px 2px rgba(0,0,0,0.8); }
.journey-col.is-night { background: linear-gradient(to bottom, rgba(20, 30, 48, 0.05), rgba(20, 30, 48, 0.15)); }
body.dark-mode .journey-col.is-night { background: linear-gradient(to bottom, rgba(10, 20, 40, 0.5), rgba(10, 20, 40, 0.8)); border: 1px solid rgba(255,255,255,0.05); }
.journey-col.is-rain { background: linear-gradient(to bottom, rgba(200, 214, 229, 0.3), rgba(131, 149, 167, 0.3)); }
body.dark-mode .journey-col.is-rain { background: linear-gradient(to bottom, rgba(50, 60, 70, 0.6), rgba(30, 40, 50, 0.6)); }
.journey-col.is-rain::before { content: ""; position: absolute; top: -100%; left: -50%; width: 200%; height: 200%; z-index: 1; background: repeating-linear-gradient(170deg, transparent, transparent 20px, rgba(52, 152, 219, 0.2) 20px, rgba(52, 152, 219, 0.2) 21px); animation: rainFall 0.8s linear infinite; pointer-events: none; }
.place-name { display: block; font-size: 0.7rem; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; color: var(--text-sub); margin-bottom: 5px; }
.place-time { display: block; font-size: 1.6rem; font-weight: 800; color: var(--text-main); line-height: 1; }
.place-weather { font-size: 0.8rem; color: var(--text-sub); margin-top: 5px; display: block; }
.journey-visual { flex: 1; text-align: center; position: relative; padding: 0 10px; overflow: visible; }
.path-line { border-top: 2px dashed var(--text-sub); opacity: 0.3; width: 100%; position: relative; top: -10px; }
.plane-icon { font-size: 1.5rem; position: relative; top: -24px; color: var(--text-main); animation: float 3s ease-in-out infinite; }
.status-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: #ccc; margin-right: 5px; transition: 0.3s; vertical-align: middle; }
.status-dot.online { background: #2ecc71 !important; box-shadow: 0 0 10px #2ecc71; animation: blink 2s infinite; }

/* --- COUNTDOWN --- */
.countdown-compact { background: var(--input-bg); border-radius: 15px; padding: 15px; text-align: center; border: 1px solid var(--border); }
.compact-title { font-size: 0.75rem; color: var(--text-sub); font-weight: 800; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 5px; }
.compact-counter { display: flex; align-items: baseline; justify-content: center; gap: 8px; color: var(--text-main); }
.big-num { font-size: 2.2rem; font-weight: 800; color: var(--pink-dark); line-height: 1; }
.unit { font-size: 1rem; font-weight: bold; color: var(--pink-dark); text-transform: uppercase; }
.small-time { font-size: 1rem; font-weight: 600; color: var(--text-main); }
.separator { margin: 0 5px; }
.progress-container-modern { margin-top: 15px; position: relative; }
.dates-row { display: flex; justify-content: space-between; font-size: 0.7rem; font-weight: bold; color: var(--text-sub); margin-bottom: 5px; }
.prog-bar-mini { height: 8px; background: var(--border); border-radius: 10px; position: relative; width: 100%; }
.prog-fill-mini { height: 100%; background: linear-gradient(90deg, var(--blue), var(--pink)); border-radius: 10px; width: 0%; transition: width 1s ease; }
.prog-heart { position: absolute; top: -6px; font-size: 14px; transform: translateX(-50%); transition: left 1s ease; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1)); }

/* --- MOODS --- */
.mood-container { display: flex; justify-content: space-between; align-items: flex-start; gap: 5px; margin-bottom: 20px; position: relative; }
.mood-person { flex: 1; min-width: 0; display: flex; flex-direction: column; align-items: center; }
.avatar-frame { height: 130px; width: 100%; display: flex; align-items: flex-end; justify-content: center; margin-bottom: -15px; z-index: 1; }
.avatar-img { max-height: 100%; max-width: 100%; object-fit: contain; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1)); }
.chatouille-img { -webkit-touch-callout: none; user-select: none; touch-action: manipulation; }
.mood-msg { position: relative; z-index: 10; background: var(--bg-card); padding: 8px 12px; border-radius: 15px; border: 1px solid var(--border); box-shadow: 0 4px 10px rgba(0,0,0,0.08); font-size: 0.8rem; font-style: italic; color: var(--text-main); text-align: center; line-height: 1.3; width: auto; max-width: 110%; min-width: 80px; margin-top: 10px; }
.mood-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.mood-btn { background: var(--input-bg); border: 1px solid var(--border); border-radius: 15px; padding: 10px; text-align: center; font-size: 1.5rem; cursor: pointer; transition: 0.2s; }
.mood-btn:active { transform: scale(0.95); }

/* --- WIDGET CYCLE --- */
#cycle-widget { width: 70px; height: 70px; flex-shrink: 0; margin-top: 30px; position: relative; cursor: pointer; border-radius: 50%; box-shadow: 0 10px 25px rgba(0,0,0,0.1); background: var(--bg-card); transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 5; }
#cycle-widget:active { transform: scale(0.9); }
body.dark-mode #cycle-widget { box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
#cycle-ring { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; z-index: 1; background: var(--border); }
#cycle-content { position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px; background: var(--bg-card); border-radius: 50%; z-index: 2; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); }
body.dark-mode #cycle-content { box-shadow: inset 0 2px 5px rgba(0,0,0,0.3); }
#cycle-day { font-size: 1.1rem; font-weight: 800; line-height: 1; font-family: 'Outfit', sans-serif; }
#cycle-icon { font-size: 0.9rem; margin-top: 2px; }
.cycle-red-text { color: #ff4b6e; }
.cycle-normal-text { color: var(--text-sub); }
body.dark-mode .cycle-red-text { color: #ff8fa3; text-shadow: 0 0 10px rgba(255, 75, 110, 0.5); }
body.dark-mode .cycle-normal-text { color: #777; }

/* --- MAILBOX --- */
.mailbox-tabs { display: flex; gap: 10px; margin-bottom: 15px; }
.mailbox-tab { flex: 1; padding: 10px; text-align: center; border-radius: 12px; font-size: 0.8rem; font-weight: bold; cursor: pointer; opacity: 0.5; transition: 0.3s; color: var(--text-main); border: 1px solid var(--border); }
.mailbox-tab.active { opacity: 1; color: white; border: none; box-shadow: 0 4px 10px var(--shadow); }
.envelope-item { background: var(--input-bg); border: 1px solid var(--border); border-radius: 12px; padding: 15px; display: flex; align-items: center; cursor: pointer; transition: 0.3s; border-left: 5px solid #ccc; margin-bottom: 10px; }
.envelope-item.unread { border-left-color: var(--pink-dark); background: rgba(255, 75, 110, 0.1); }
.hidden { display: none; }

/* --- ALBUMS & POLAROIDS --- */
.polaroid-container { display: flex; justify-content: space-around; }
.polaroid { background: white; padding: 10px 10px 30px 10px; position: relative; box-shadow: 0 5px 15px var(--p-shadow); transform: rotate(-2deg); width: 45%; text-align: center; cursor: pointer; transition: 0.3s; border-radius: 0; }
.polaroid:nth-child(2) { transform: rotate(3deg); }
.polaroid:active { transform: scale(1.05) rotate(0deg); z-index: 10; }
.polaroid-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; background: #eee; margin-bottom: 5px; }
.polaroid-label { font-family: 'Dancing Script', cursive; font-size: 1.2rem; color: #555; }
.add-photo-btn { display: none; margin-top: 5px; font-size: 0.7rem; color: #888; border: 1px dashed #ccc; padding: 5px; border-radius: 5px; }

/* --- TODO / PROJETS --- */
.todo-tabs { display: flex; gap: 10px; margin-bottom: 15px; }
.todo-tab { flex: 1; padding: 10px; text-align: center; border-radius: 12px; font-size: 0.85rem; font-weight: 800; cursor: pointer; border: 1px solid var(--border); color: var(--text-sub); background: var(--input-bg); transition: all 0.3s ease; }
.todo-tab.tab-dist.active { background: var(--blue); color: white; border-color: transparent; box-shadow: 0 4px 10px rgba(142, 202, 230, 0.4); transform: translateY(-2px); }
.todo-tab.tab-real.active { background: var(--pink-dark); color: white; border-color: transparent; box-shadow: 0 4px 10px rgba(255, 75, 110, 0.4); transform: translateY(-2px); }
.progress-dist .book-progress-bar { background: var(--blue); }
.progress-real .book-progress-bar { background: var(--pink-dark); }
.prog-label-row { display: flex; justify-content: space-between; font-size: 0.75rem; font-weight: bold; color: var(--text-sub); margin-bottom: 5px; }
.new-todo-box { background: var(--input-bg); padding: 15px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 15px; }
.todo-helper-text { font-size: 0.8rem; font-weight: bold; color: var(--text-sub); margin-bottom: 10px; }
.cat-selector { display: flex; gap: 8px; margin-bottom: 10px; justify-content: space-between; }
.cat-option { width: 40px; height: 40px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; border: 2px solid transparent; background: white; transition: 0.2s; opacity: 0.6; filter: grayscale(100%); }
.cat-option:hover { transform: scale(1.1); }
.cat-option.selected { opacity: 1; filter: grayscale(0%); border-color: var(--c); background: var(--input-bg); transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
body.dark-mode .cat-option { background: #333; }
.todo-item { display: flex; align-items: center; background: white; padding: 12px 15px; margin-bottom: 10px; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 2px 5px rgba(0,0,0,0.02); transition: 0.3s; position: relative; overflow: hidden; }
.todo-item::before { content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: var(--cat-color, #ccc); }
.todo-check { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--cat-color, var(--pink)); cursor: pointer; z-index: 2; }
.todo-content { flex: 1; display: flex; flex-direction: column; }
.todo-text { font-size: 0.95rem; color: var(--text-main); font-weight: 600; transition: 0.3s; }
.todo-cat-icon { font-size: 0.8rem; margin-right: 6px; vertical-align: middle; }
.todo-text.done { text-decoration: line-through; color: var(--text-sub); opacity: 0.7; }
.todo-item.done { background: var(--input-bg); border-color: transparent; box-shadow: none; opacity: 0.8; }
.todo-del { background: none; border: none; color: #ffadad; cursor: pointer; font-size: 1.1rem; opacity: 0.4; padding: 5px; transition: 0.2s; margin-left: 10px; }
.todo-del:hover { opacity: 1; transform: scale(1.1); color: #e74c3c; }
body.dark-mode .todo-item { background: #2a2a2a; border-color: #444; }
body.dark-mode .todo-item.done { background: #1f1f1f; }

/* --- LIVRES --- */
.book-item { background: var(--input-bg); padding: 15px; border-radius: 16px; margin-bottom: 15px; border: 1px solid var(--border); }
.book-title { font-weight: 800; font-size: 1rem; color: var(--text-main); margin-bottom: 5px; display: flex; justify-content: space-between; }
.book-total-pages { font-size: 0.7rem; color: var(--text-sub); margin-bottom: 10px; font-weight: 500; }
.user-row { display: flex; flex-direction: column; margin-bottom: 12px; border-bottom: 1px dashed var(--border); padding-bottom: 10px; }
.row-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
.user-inputs { display: flex; align-items: center; gap: 10px; width: 100%; }
.page-input { width: 50px; padding: 4px; border-radius: 6px; border: 1px solid var(--border); text-align: center; font-weight: bold; font-size: 0.9rem; background: var(--bg-card); color: var(--text-main); }
.star-rating { display: flex; gap: 1px; }
.star { cursor: pointer; font-size: 1.1rem; color: #ddd; transition: 0.2s; }
.star.filled { color: #ffb84d; }
.star-reset { font-size: 0.7rem; color: var(--text-sub); cursor: pointer; margin-left: 5px; padding: 2px; }
.book-progress-track { flex: 1; height: 6px; background: var(--border); border-radius: 4px; overflow: hidden; margin-left: 10px; }
.book-progress-bar { height: 100%; width: 0%; transition: width 0.5s ease; border-radius: 4px; }

/* --- JEUX GLOBAL --- */
.game-selector { display: flex; gap: 10px; margin-bottom: 15px; }
.game-btn { flex: 1; padding: 12px 5px; border-radius: 15px; border: 1px solid var(--border); background: var(--bg-card); color: var(--text-main); font-weight: bold; cursor: pointer; transition: 0.2s; font-size: 0.9rem; box-shadow: 0 4px 5px rgba(0,0,0,0.05); display: flex; justify-content: center; align-items: center; gap: 8px; white-space: nowrap; }
.game-btn:active { transform: scale(0.95); }
.game-btn.active-game { border: 2px solid var(--pink-dark); background: #fff0f5; color: var(--pink-dark); }
.game-indicator { display: block; width: 8px; height: 8px; background-color: #dcdcdc; border-radius: 50%; opacity: 1; transition: all 0.3s ease; flex-shrink: 0; border: 1px solid transparent; }
.game-btn.is-running .game-indicator { background-color: #2ecc71; box-shadow: 0 0 5px #2ecc71; animation: pulse-dot 2s infinite; }
@keyframes pulse-dot { 0% { transform: scale(0.95); opacity: 0.8; } 50% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(0.95); opacity: 0.8; } }
.game-block { display: none; background: var(--input-bg); border: 1px solid var(--border); border-radius: 15px; padding: 15px; margin-bottom: 20px; animation: slideDown 0.3s ease; }
@keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
.game-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed var(--border); padding-bottom: 5px; }
.game-title-text { font-weight: 800; text-transform: uppercase; color: var(--text-main); display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
.game-close-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: var(--text-sub); }
.score-pill { background: var(--bg-card); border: 1px solid var(--border); padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: bold; color: var(--pink-dark); }
.status-msg { text-align: center; font-style: italic; color: var(--text-sub); margin: 10px 0; font-size: 0.9rem; min-height: 20px; }
.history-box { margin-top: 15px; max-height: 100px; overflow-y: auto; font-size: 0.75rem; border-top: 1px solid var(--border); padding-top: 10px; }
.hist-row { display: flex; justify-content: space-between; margin-bottom: 4px; color: var(--text-sub); }
.hist-win { color: #2ecc71; font-weight: bold; }
.hist-loose { color: #e74c3c; font-weight: bold; }

/* --- JEU: PENDU --- */
#pendu-canvas { display: block; margin: 0 auto 10px auto; border-bottom: 2px solid var(--text-main); width: 200px; height: 150px; }
.pendu-word { font-size: 1.5rem; letter-spacing: 5px; font-weight: bold; margin: 15px 0; color: var(--text-main); text-align: center; }
/* --- FIX PENDU FINAL --- */
#pendu-setup {
    /* Pas de !important sur display, sinon le jeu ne peut pas le cacher */
    display: flex; 
    flex-direction: column;
    align-items: center;
    gap: 15px;
    width: 100%;
    margin-top: 20px;
}

/* Le bouton g√©n√©r√© par le JS aura cette classe */
.pendu-btn-js {
    width: 80%;
    padding: 10px;
    background: var(--blue-dark);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    cursor: pointer;
}
#pendu-secret {width: 80% !important;text-align: center !important;margin: 0 !important;}
.pendu-btn {width: 80% !important;margin: 0 !important;display: block !important;}
.keyboard { display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; margin-top: 15px; }
.key-btn { width: 30px; height: 35px; border: 1px solid var(--border); border-radius: 5px; background: white; cursor: pointer; font-weight: bold; color: #333; }
.key-btn:disabled { opacity: 0.3; background: #ddd; }

/* --- JEU: P4 --- */
#p4-restart-btn { margin-bottom: 25px !important; display: block !important; width: 100% !important; }
.p4-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; background: #34495e; padding: 10px; border-radius: 10px; max-width: 300px; margin: 0 auto; }
.p4-cell { aspect-ratio: 1/1; background: var(--bg-body); border-radius: 50%; cursor: pointer; border: 2px solid rgba(0,0,0,0.1); transition: 0.2s; }
.p4-cell.p1 { background: var(--blue); box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }
.p4-cell.p2 { background: var(--pink); box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }

/* STYLE SPECIAL TOUR DE JEU (Activ√© par JS) */
.active-turn { font-size: 1.3rem !important; font-weight: 800 !important; background: white !important; padding: 15px !important; border-radius: 15px !important; border: 2px solid var(--border) !important; box-shadow: 0 5px 15px rgba(0,0,0,0.08) !important; margin: 10px 0 25px 0 !important; font-style: normal !important; text-transform: uppercase !important; letter-spacing: 1px !important; }

/* --- JEU: UNO --- */
.uno-board { text-align: center; }
.uno-top-info { display: flex; justify-content: center; gap: 15px; align-items: center; margin-bottom: 15px; font-size: 0.8rem; font-weight: bold; color: var(--text-sub); }
.uno-table { background: rgba(0,0,0,0.03); border-radius: 20px; padding: 20px; min-height: 150px; display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 20px; }
.uno-card { width: 60px; height: 90px; border-radius: 8px; display: flex; justify-content: center; align-items: center; font-weight: 800; font-size: 1.2rem; color: #555; text-shadow: none; box-shadow: 0 4px 8px rgba(0,0,0,0.1); cursor: pointer; user-select: none; border: 2px solid white; position: relative; transition: 0.2s; }
.uno-card:active { transform: scale(1.1); }
.uno-card.red { background: var(--uno-red); }
.uno-card.blue { background: var(--uno-blue); }
.uno-card.green { background: var(--uno-green); }
.uno-card.yellow { background: var(--uno-yellow); }
.uno-card.black { background: var(--uno-black); color: white; }
.uno-card.back { background: #333; background-image: repeating-linear-gradient(45deg, #444 0, #444 10px, #333 10px, #333 20px); color: transparent; }
.uno-hand { display: flex; overflow-x: auto; padding: 10px; gap: 5px; min-height: 110px; background: rgba(255,255,255,0.5); border-radius: 15px; }

/* --- JEU: PETIT BAC --- */
.bac-letter-sticky { background: linear-gradient(135deg, var(--blue), var(--pink)); color: white; padding: 8px 20px; border-radius: 30px; display: inline-block; font-weight: 800; margin-bottom: 15px; position: sticky; top: 0; z-index: 5; box-shadow: 0 4px 10px rgba(0,0,0,0.1); font-size: 1.1rem; }
.bac-row { margin-bottom: 12px; text-align: left; }
.bac-label { font-size: 0.75rem; color: var(--pink-dark); font-weight: 800; display: block; margin-bottom: 3px; text-transform: uppercase; letter-spacing: 1px; }
body.dark-mode .bac-label { color: #ff9eb5; }
.bac-input { width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 12px; background: white; font-family: 'Outfit'; transition: 0.2s; font-size: 1rem; color: var(--text-main); }
.bac-input:focus { border-color: var(--pink); outline: none; }
body.dark-mode .bac-input { background-color: var(--input-bg); color: white !important; border-color: #555; }
.review-item { background: white; border: 1px solid var(--border); padding: 15px; margin-bottom: 10px; border-radius: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
body.dark-mode .review-item { background-color: #2d2d2d !important; border: 1px solid #444 !important; box-shadow: none; }
.review-ans { font-size: 1.2rem; font-weight: bold; color: var(--text-main); margin: 5px 0 10px 0; }
body.dark-mode .review-ans { color: white !important; text-shadow: 0 1px 2px black; }
.review-btns { display: flex; gap: 8px; justify-content: center; }
.r-btn { flex: 1; border: 1px solid #eee; padding: 10px; border-radius: 10px; cursor: pointer; font-size: 0.9rem; font-weight: bold; color: var(--text-sub); background: var(--input-bg); transition: 0.2s; }
body.dark-mode .r-btn { background-color: #383838; color: #aaa; border-color: #555; }
.r-btn-0.selected { background: #ff7675 !important; color: white !important; border-color: #ff7675 !important; }
.r-btn-1.selected { background: var(--blue) !important; color: white !important; border-color: var(--blue) !important; }
.r-btn-2.selected { background: #55efc4 !important; color: white !important; border-color: #55efc4 !important; }
.bac-res-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 0.85rem; }
.bac-res-header { background: var(--pink-dark); color: white; font-weight: bold; }
.bac-res-header th { padding: 8px; }
.bac-res-row { border-bottom: 1px solid var(--border); }
.bac-res-row td { padding: 8px 4px; vertical-align: middle; }
.bac-res-cat { font-weight: 800; color: var(--blue-dark); font-size: 0.7rem; text-transform: uppercase; width: 20%; }
.bac-res-ans { color: var(--text-main); line-height: 1.2; }
.bac-badge { display: inline-block; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; color: white; margin-left: 4px; }
.bg-0 { background: #ff7675; }
.bg-1 { background: var(--blue); }
.bg-2 { background: #55efc4; color: #333; }
#bac-finished { text-align: center; display: none; flex-direction: column; align-items: center; padding: 10px; }
.winner-icon { font-size: 4rem; display: block; margin: 10px auto; animation: bounce 2s infinite; }
.winner-text { font-size: 1.5rem; font-weight: 800; margin: 5px 0; color: var(--pink-dark); }
.score-text { font-size: 1.1rem; color: var(--text-sub); margin-bottom: 15px; font-weight: bold; }

/* --- LOGIN SCREEN --- */
#login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-body); z-index: 99999; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; transition: opacity 0.5s ease; }
.title-large { margin-bottom: 30px; font-size: 3rem; }
#login-loading { display: flex; flex-direction: column; align-items: center; gap: 20px; }
.spinner { width: 50px; height: 50px; border: 4px solid rgba(0, 0, 0, 0.1); border-left-color: var(--blue); border-top-color: var(--pink); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
#login-box { display: none; background: var(--bg-card); padding: 30px; border-radius: 20px; width: 100%; max-width: 350px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid var(--border); text-align: center; }
.login-msg { margin-bottom: 20px; color: var(--text-sub); }
.btn-login { width: 100%; background: linear-gradient(135deg, var(--blue), var(--pink)); font-size: 1.1rem; padding: 12px; }
#login-error { color: red; font-size: 0.8rem; margin-top: 15px; display: none; }

/* --- FOOTER --- */
.app-footer { text-align: center; padding: 20px; margin-top: 30px; opacity: 1; }
.footer-content { display: inline-flex; align-items: center; justify-content: center; gap: 15px; background: var(--bg-card); padding: 10px 25px; border-radius: 30px; box-shadow: 0 4px 15px var(--shadow); border: 1px solid var(--border); }
.footer-logo { width: 40px; height: 40px; border-radius: 50%; border: 2px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.spotify-link { display: inline-flex; align-items: center; justify-content: center; }
.spotify-icon { width: 35px; height: 35px; transition: 0.2s; }
.spotify-icon:active { transform: scale(0.9); }
.footer-version { font-size: 0.7rem; color: var(--text-sub); margin-top: 10px; }

/* --- OVERLAYS & MODALS --- */
#bd-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.92); z-index: 99999; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; }
.bd-title { font-family: 'Pacifico', cursive; font-size: 2.5rem; color: #ffeb3b; margin-bottom: 20px; animation: bounce 2s infinite; }
.cake-container { position: relative; width: 220px; height: 200px; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; margin-bottom: 50px; }
.cake-base { width: 100%; height: 80px; background: linear-gradient(to bottom, #f8a5c2, #f78fb3); border-radius: 10px; position: relative; display: flex; justify-content: center; box-shadow: 0 10px 20px rgba(0,0,0,0.5); z-index: 1; }
.cake-layer { width: 110%; height: 20px; background: #fff; border-radius: 10px; position: absolute; top: -10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.candles-row { display: flex; gap: 30px; position: relative; z-index: 2; margin-bottom: -10px; }
.candle-wrapper { position: relative; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; }
.candle-wrapper:active { transform: scale(0.95); }
.candle-num { font-size: 5rem; font-weight: 800; color: #ffeb3b; text-shadow: 0 5px 0 #e1b12c; font-family: 'Outfit'; -webkit-text-stroke: 2px #333; line-height: 1; }
.flame { width: 20px; height: 35px; background: radial-gradient(white, yellow, orange, red); border-radius: 50% 50% 20% 20%; margin-bottom: 5px; animation: flicker 0.5s infinite alternate; box-shadow: 0 0 20px orange; opacity: 1; transform: scale(1); transition: opacity 0.2s, transform 0.2s; }
.smoke { width: 8px; height: 8px; background: rgba(200,200,200,0.8); border-radius: 50%; position: absolute; top: 10px; opacity: 0; pointer-events: none; }
.candle-wrapper.blown-out .flame { opacity: 0 !important; visibility: hidden !important; transform: scale(0) !important; animation: none !important; transition: none !important; }
.candle-wrapper.blown-out .smoke { animation: puff 1.5s forwards; }
#easter-egg-container { display: none; flex-direction: column; align-items: center; }
.easter-egg { font-size: 100px; cursor: pointer; transition: 0.2s; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.5)); user-select: none; }
.crack-1 { transform: rotate(10deg); }
.crack-2 { transform: rotate(-10deg) scale(1.1); }
.crack-3 { animation: hatch 0.5s forwards; font-size: 120px; }
.big-heart { font-size: 100px; cursor: pointer; user-select: none; filter: drop-shadow(0 0 20px rgba(255, 20, 147, 0.5)); animation: heartbeat 1.2s infinite; transition: transform 0.1s; }
.big-heart:active { transform: scale(0.9); }
#love-container { display: none; flex-direction: column; align-items: center; }
.bd-msg { font-size: 1.1rem; opacity: 0.8; margin-top: 20px; font-style: italic; max-width: 80%; line-height: 1.5; }
.btn-enter { margin-top: 30px; background: white; color: #333; border: none; padding: 15px 40px; border-radius: 30px; font-weight: bold; font-size: 1.2rem; cursor: pointer; display: none; animation: slideUp 0.5s; box-shadow: 0 0 20px white; }
#bisou-btn { position: fixed; bottom: 30px; right: 25px; width: 70px; height: 70px; border-radius: 50%; background: linear-gradient(135deg, var(--pink), var(--pink-dark)); color: white; border: none; font-size: 30px; box-shadow: 0 10px 25px rgba(255, 75, 110, 0.4); cursor: pointer; z-index: 1000; animation: pulse 3s infinite; }
#notif { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: #333; color: white; padding: 10px 20px; border-radius: 30px; z-index: 9999; transition: 0.3s; display: flex; align-items: center; gap: 10px; }
#notif.show { transform: translateX(-50%) translateY(0); }
#custom-alert { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 10000; justify-content: center; align-items: center; backdrop-filter: blur(3px); }
.alert-box { background: var(--bg-card); padding: 25px; border-radius: 25px; width: 85%; max-width: 300px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3); border: 1px solid var(--border); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
#alert-icon { font-size: 3rem; margin-bottom: 10px; }
#alert-title { font-family: 'Pacifico'; margin: 0 0 10px 0; color: var(--text-main); font-size: 1.4rem; }
#alert-msg { font-size: 0.95rem; color: var(--text-sub); margin-bottom: 20px; line-height: 1.4; }
#letter-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; justify-content: center; align-items: center; padding: 20px; backdrop-filter: blur(5px); }
.real-letter { background: #fffdf0; width: 100%; max-width: 400px; max-height: 80vh; display: flex; flex-direction: column; padding: 30px; border-radius: 5px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; background-image: radial-gradient(#e0e0e0 1px, transparent 1px); background-size: 20px 20px; transform: rotate(-1deg); }
.real-letter h2 { font-family: 'Pacifico', cursive; margin-top: 0; color: var(--pink-dark); margin-right: 30px; flex-shrink: 0; }
#modal-letter-content { font-family: 'Dancing Script', cursive; font-size: 1.6rem; line-height: 1.6; color: #333; white-space: pre-wrap; overflow-y: auto; flex: 1; padding-right: 10px; margin-bottom: 20px; }
.letter-close { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; color: #aaa; background: none; border: none; cursor: pointer; z-index: 10; }
.letter-stamp { position: absolute; bottom: 20px; right: 20px; width: 60px; height: 60px; border: 2px double #d4af37; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #d4af37; font-size: 0.7rem; font-weight: bold; transform: rotate(-15deg); opacity: 0.7; text-align: center; pointer-events: none; }
#gallery-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 6000; padding: 20px; overflow-y: auto; }
.modal-header { display: flex; justify-content: space-between; color: white; margin-bottom: 20px; align-items: center; }
.close-icon { background: none; border: none; color: white; font-size: 2rem; cursor: pointer; }
.modal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
.modal-img { width: 100%; border-radius: 5px; cursor: zoom-in; transition: 0.2s; }
.modal-img:hover { opacity: 0.8; }
#lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 7000; justify-content: center; align-items: center; padding: 0; }
#lightbox img { max-width: 100%; max-height: 100%; object-fit: contain; }
.lightbox-close { position: absolute; top: 20px; right: 20px; color: white; font-size: 2rem; background: none; border: none; cursor: pointer; }
#upload-choice-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center; }
.modal-content { background: var(--bg-card); padding: 25px; border-radius: 20px; width: 85%; max-width: 320px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 1px solid var(--border); }
.emoji-large { font-size: 3rem; margin-bottom: 10px; }
.btn-group-vertical { display: flex; gap: 10px; flex-direction: column; }
#scratch-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; }
.scratch-title { color: white; font-family: 'Pacifico'; font-size: 1.5rem; margin-bottom: 15px; animation: bounce 2s infinite; }
.scratch-area { position: relative; width: 300px; height: 300px; border-radius: 15px; overflow: hidden; box-shadow: 0 0 30px rgba(255,255,255,0.2); }
#scratch-img-target { width: 100%; height: 100%; object-fit: cover; }
#scratch-canvas { position: absolute; top: 0; left: 0; touch-action: none; cursor: crosshair; }
.btn-cancel-scratch { margin-top: 30px; padding: 12px 30px; border-radius: 30px; border: none; background: white; font-weight: bold; color: #333; cursor: pointer; }
#cycle-edit-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; justify-content: center; align-items: center; }
.close-modal-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 1.2rem; cursor: pointer; color: var(--text-sub); }
.cycle-title { font-family: 'Pacifico'; margin: 0 0 15px 0; color: var(--pink-dark); }
.cycle-desc { font-size: 0.9rem; color: var(--text-sub); margin-bottom: 20px; }
.cycle-input-row { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
.cycle-adj-btn { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border); background: var(--input-bg); font-weight: bold; font-size: 1.2rem; }
#cycle-input-val { width: 60px; text-align: center; font-size: 1.5rem; border: none; background: transparent; font-weight: 800; color: var(--text-main); font-family: 'Outfit'; }
.reset-cycle-link { margin-top: 15px; font-size: 0.8rem; color: var(--text-sub); cursor: pointer; text-decoration: underline; }
#jackpot-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 20000; justify-content: center; align-items: center; flex-direction: column; cursor: pointer; }
.jackpot-card { background: white; padding: 15px 15px 50px 15px; border-radius: 5px; transform: rotate(-3deg); animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.jackpot-img { width: 280px; height: auto; display: block; border: 1px solid #ddd; }
.jackpot-text { font-family: 'Dancing Script'; font-size: 1.8rem; color: #333; text-align: center; margin-top: 15px; }
.jackpot-hint { color: white; margin-top: 20px; font-size: 0.9rem; opacity: 0.8; }
#uno-color-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9000; justify-content: center; align-items: center; }
.color-picker-box { background: white; padding: 20px; border-radius: 15px; text-align: center; }
.cp-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
.cp-circle { width: 60px; height: 60px; border-radius: 50%; cursor: pointer; border: 2px solid #ddd; }
.cp-circle.red { background: var(--uno-red); }
.cp-circle.blue { background: var(--uno-blue); }
.cp-circle.green { background: var(--uno-green); }
.cp-circle.yellow { background: var(--uno-yellow); }
#custom-mood-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 15000; justify-content: center; align-items: center; animation: fadeIn 0.3s ease; }
.custom-mood-box { background: var(--bg-card); width: 85%; max-width: 320px; padding: 25px; border-radius: 25px; border: 1px solid var(--border); text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.2); transform: scale(0.9); animation: popIn 0.3s forwards; }
.emoji-header { font-size: 3rem; margin-bottom: 10px; animation: float 3s infinite ease-in-out; }
.mood-modal-title { font-family: 'Pacifico', cursive; color: var(--text-main); margin: 0 0 5px 0; font-size: 1.5rem; }
.mood-modal-desc { color: var(--text-sub); font-size: 0.9rem; margin-bottom: 20px; }
.mood-input { width: 100%; background: var(--input-bg); border: 2px solid var(--border); text-align: center; font-size: 1.1rem; padding: 15px; border-radius: 15px; margin-bottom: 20px; color: var(--text-main); transition: 0.3s; }
.mood-input:focus { border-color: var(--pink); box-shadow: 0 0 0 4px rgba(255, 158, 181, 0.2); }
.mood-actions { display: flex; gap: 10px; }

/* --- MINI CHAT FLOTTANT --- */
#chat-btn {
    position: fixed;
    bottom: 30px;
    left: 25px; /* √Ä l'oppos√© du bouton Bisou */
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--bg-card);
    border: 1px solid var(--border);
    font-size: 1.8rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    cursor: pointer;
    z-index: 9000;
    transition: transform 0.2s;
    display: flex;
    justify-content: center;
    align-items: center;
}
#chat-btn:active { transform: scale(0.9); }

.chat-badge {
    position: absolute;
    top: 0;
    right: 0;
    width: 15px;
    height: 15px;
    background: #ff4757;
    border-radius: 50%;
    border: 2px solid white;
}
.chat-badge.hidden { display: none; }

#chat-window {
    display: none; /* Cach√© par d√©faut */
    position: fixed;
    bottom: 100px;
    left: 25px;
    width: 300px;
    height: 400px;
    background: var(--bg-card);
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    border: 1px solid var(--border);
    z-index: 9001;
    flex-direction: column;
    overflow: hidden;
    animation: slideUpChat 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Adaptation Mobile : Le chat prend plus de place mais reste "flottant" */
@media (max-width: 450px) {
    #chat-window {
        left: 5%;
        width: 90%;
        bottom: 110px; /* Juste au dessus de la nav/boutons */
        height: 50vh; 
    }
}

@keyframes slideUpChat { from { opacity: 0; transform: translateY(20px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

.chat-header {
    background: linear-gradient(135deg, var(--blue), var(--pink));
    padding: 12px 15px;
    color: white;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}
.chat-close { background: none; border: none; color: white; font-weight: bold; cursor: pointer; font-size: 1.1rem; }

#chat-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: var(--input-bg);
}

.chat-placeholder { text-align: center; color: var(--text-sub); font-size: 0.8rem; font-style: italic; margin-top: 50%; }

/* Bulles de message */
.msg-bubble {
    max-width: 80%;
    padding: 8px 12px;
    border-radius: 15px;
    font-size: 0.9rem;
    line-height: 1.4;
    word-wrap: break-word;
    position: relative;
    animation: popIn 0.2s;
}

.msg-me {
    align-self: flex-end;
    background: var(--blue);
    color: white;
    border-bottom-right-radius: 2px;
}
/* Si c'est Elise (tw) qui se voit, elle est en rose, sinon bleu.
   On g√©rera la couleur via JS ou classe sp√©cifique.
   Ici : msg-me = couleur de l'utilisateur courant.
*/
.msg-me.fr { background: var(--blue); }
.msg-me.tw { background: var(--pink); }

.msg-other {
    align-self: flex-start;
    background: white;
    border: 1px solid var(--border);
    color: var(--text-main);
    border-bottom-left-radius: 2px;
}

.msg-time {
    font-size: 0.6rem;
    opacity: 0.7;
    margin-top: 4px;
    text-align: right;
    display: block;
}

.chat-input-zone {
    padding: 10px;
    border-top: 1px solid var(--border);
    background: var(--bg-card);
    display: flex;
    gap: 8px;
}
#chat-input {
    flex: 1;
    padding: 10px;
    border-radius: 20px;
    border: 1px solid var(--border);
    outline: none;
    font-size: 0.9rem;
}
.chat-send-btn {
    background: var(--text-main);
    color: var(--bg-body);
    border: none;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* --- MODAL OPTIONS CHAT --- */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.6); z-index: 10000;
    display: flex; justify-content: center; align-items: center;
    backdrop-filter: blur(2px);
    animation: fadeIn 0.2s;
}

.modal-content-small {
    background: var(--bg-card);
    padding: 20px;
    border-radius: 20px;
    width: 80%;
    max-width: 280px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    animation: popIn 0.3s;
}

.mb-10 { margin-bottom: 10px; }

/* Animation pour feedback visuel lors du long press */
.msg-bubble.pressing {
    transform: scale(0.95);
    opacity: 0.8;
    transition: 0.2s;
}

/* --- EDIT INLINE STYLE --- */
.edit-box-inline {
    display: flex;
    align-items: center;
    gap: 5px;
    width: 100%;
}

.edit-msg-input {
    width: 100%;
    border: none;
    border-radius: 5px;
    padding: 5px;
    font-size: 0.9rem;
    color: #333;
    outline: none;
    background: rgba(255, 255, 255, 0.9);
}

.btn-save-edit {
    background: #2ecc71;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 5px 10px;
    font-size: 0.8rem;
    font-weight: bold;
    cursor: pointer;
}

/* --- ANIMATIONS GLOBALES --- */
@keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-5px)} }
@keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 75, 110, 0.6); } 70% { box-shadow: 0 0 0 15px rgba(255, 75, 110, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 75, 110, 0); } }
@keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes flicker { 0% { transform: scale(1); opacity: 0.9; } 100% { transform: scale(1.1); opacity: 1; } }
@keyframes puff { 0% { opacity: 0.8; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-40px) scale(3); } }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
@keyframes rainFall { 0% { transform: translateY(0); } 100% { transform: translateY(50px); } }
@keyframes heartbeat { 0% { transform: scale(1); } 15% { transform: scale(1.15); } 30% { transform: scale(1); } 45% { transform: scale(1.15); } 60% { transform: scale(1); } 100% { transform: scale(1); } }
@keyframes hatch { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
@keyframes riseUp { 0% { bottom: -50px; opacity: 0; transform: scale(1); } 50% { opacity: 0.4; } 100% { bottom: 80%; opacity: 0; transform: scale(1.2) rotate(20deg); } }
@keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
.float-heart { position: fixed; font-size: 2rem; pointer-events: none; animation: floatUp 1s ease-out forwards; z-index: 9999; }
@keyframes floatUp { 0% { transform: scale(0.5) translateY(0); opacity: 1; } 100% { transform: scale(1.5) translateY(-100px); opacity: 0; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* --- RESPONSIVE --- */
@media (max-width: 360px) {
    #cycle-widget { width: 60px; height: 60px; }
    #cycle-day { font-size: 0.9rem; }
}
