<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Love Travel">
    <meta name="theme-color" content="#fff0f3">
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.jpg">
    <link rel="icon" type="image/jpeg" href="icon.jpg">

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;800&family=Pacifico&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <title>Love Travel ‚úàÔ∏è</title>
</head>
<body>

    <div id="login-screen">
        <h1 class="app-title title-large">Love Travel üîí</h1>
        
        <div id="login-loading">
            <div class="spinner"></div>
            <div class="loading-text">Chargement...</div>
        </div>
    
        <div id="login-box">
            <p class="login-msg">Connecte-toi pour acc√©der √† notre monde.</p>
            <input type="email" id="login-email" class="input-field" placeholder="Email">
            <input type="password" id="login-pass" class="input-field" placeholder="Mot de passe">
            <button onclick="loginApp()" class="btn-action btn-login">Entrer ‚ú®</button>
            <p id="login-error">Erreur d'identifiants</p>
        </div>
    </div>

    <div id="bd-overlay">
        <div class="bd-title" id="bd-title-text">Joyeux Anniversaire !</div>
        
        <div class="cake-container" id="cake-mode-container">
            <div class="candles-row" id="candles-area"></div>
            <div class="cake-base"><div class="cake-layer"></div></div>
        </div>

        <div id="easter-egg-container">
            <div class="easter-egg" id="easter-egg" onclick="crackEgg()">ü•ö</div>
        </div>

        <div id="love-container">
            <div class="big-heart" onclick="clickHeart()">‚ù§Ô∏è</div>
        </div>

        <div class="bd-msg" id="overlay-msg">Fais un v≈ìu et souffle (clique) sur les bougies ! üïØÔ∏è</div>
        <button class="btn-enter" onclick="enterSpecialApp()">üéÅ Entrer dans l'app</button>
    </div>

    <div id="notif">üíã Bisou re√ßu !</div>
    <button id="bisou-btn" onclick="sendBisou()">üíã</button>
    
    <div id="custom-alert">
        <div class="alert-box">
            <div id="alert-icon">‚ú®</div>
            <h3 id="alert-title">Titre</h3>
            <p id="alert-msg">Message ici...</p>
            <button onclick="document.getElementById('custom-alert').style.display='none'" class="btn-action">C'est not√© !</button>
        </div>
    </div>

    <div id="letter-modal">
        <div class="real-letter">
            <button class="letter-close" onclick="closeLetter()">‚úï</button>
            <h2 id="modal-letter-title"></h2>
            <p id="modal-letter-content"></p>
            <div class="letter-stamp">POSTE<br>AMOUR</div>
        </div>
    </div>

    <div id="gallery-modal">
        <div class="modal-header">
            <h2>Galerie</h2>
            <button onclick="closeGallery()" class="close-icon">‚úï</button>
        </div>
        <div class="modal-grid" id="modal-grid"></div>
    </div>

    <div id="lightbox" onclick="closeLightbox()">
        <button class="lightbox-close">‚úï</button>
        <img id="lightbox-img" src="">
    </div>

    <header>
        <div class="header-top">
            <button class="header-btn" id="user-toggle-btn" onclick="switchUser()">üáπüáº</button>
            <h1 class="app-title" onclick="clickTitle()">Love Travel</h1>
            <button class="header-btn" onclick="toggleTheme()">üåó</button>
        </div>
        <div id="bd-subtitle" class="bd-subtitle"></div>
    </header>

    <div class="container">

        <div class="card voyage-card" id="card-voyage">
            <div class="card-content">
                <div class="journey-row">
                    <div class="journey-col">
                        <span class="place-name"><span id="dot-fr" class="status-dot"></span> France</span>
                        <span class="place-time" id="clock-fr">--:--</span>
                        <span class="place-weather" id="weather-fr">--¬∞C</span>
                    </div>
                    <div class="journey-visual">
                        <div class="plane-icon">‚úàÔ∏è</div>
                        <div class="path-line"></div>
                    </div>
                    <div class="journey-col">
                        <span class="place-name"><span id="dot-tw" class="status-dot"></span> Ta√Øwan</span>
                        <span class="place-time" id="clock-tw">--:--</span>
                        <span class="place-weather" id="weather-tw">--¬∞C</span>
                    </div>
                </div>
                <div class="countdown-compact">
                    <div id="countdown-title" class="compact-title">D√âPART DANS</div>
                    <div class="compact-counter">
                        <span id="days-count" class="big-num">--</span> 
                        <span class="unit" id="days-unit">JOURS</span>
                        <span class="separator">‚Ä¢</span>
                        <span id="sub-count" class="small-time">-- h et -- min</span>
                    </div>
                    <div class="progress-container-modern">
                        <div class="dates-row"><span>14 F√©v</span><span>05 Juil</span></div>
                        <div class="prog-bar-mini">
                            <div class="prog-fill-mini" id="prog-fill"></div>
                            <div class="prog-heart" id="prog-heart">ü©∑</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" id="card-mood">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>‚òÅÔ∏è</span> Nos Moods</div>
            </div>
            <div class="card-content">
                <div class="mood-container">
                    <div class="mood-person">
                        <div class="avatar-frame"><img src="" id="mood-img-fr" class="avatar-img chatouille-img" data-role="fr"></div>
                        <div class="mood-msg" id="mood-msg-fr">...</div>
                    </div>
                    
                    <div id="cycle-widget" onclick="editCycle()">
                        <div id="cycle-ring"></div> 
                        <div id="cycle-content">
                            <div id="cycle-day">J-1</div>
                            <div id="cycle-icon">üå∏</div>
                        </div>
                    </div>
                    
                    <div class="mood-person">
                        <div class="avatar-frame"><img src="" id="mood-img-tw" class="avatar-img chatouille-img" data-role="tw"></div>
                        <div class="mood-msg" id="mood-msg-tw">...</div>
                    </div>
                </div>
                <div class="mood-grid">
                    <div class="mood-btn" onclick="updateMood('ü•∞', 'Tu me manques !', 0)">ü•∞</div>
                    <div class="mood-btn" onclick="updateMood('ü§ì', 'Je suis en cours', 1)">ü§ì</div>
                    <div class="mood-btn" onclick="updateMood('üò¥', 'Zzz Zzz', 2)">üò¥</div>
                    <div class="mood-btn" onclick="updateMood('üòã', 'Je mangeee !', 3)">üòã</div>
                    <div class="mood-btn" onclick="updateMood('ü•µ', 'Envie de toi...', 4)">ü•µ</div>
                    <div class="mood-btn" onclick="openCustomMood()" style="color:var(--pink);">‚úèÔ∏è</div>
                </div>
            </div>
        </div>

        <div class="card" id="card-letter">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>üíå</span> Bo√Æte aux Lettres</div>
            </div>
            <div class="card-content">
                <div class="mailbox-tabs">
                    <div class="mailbox-tab active" id="tab-inbox" onclick="showTab('inbox')">Re√ßus</div>
                    <div class="mailbox-tab" id="tab-sent" onclick="showTab('sent')">Envoy√©s</div>
                </div>
                <div class="input-group">
                    <input type="text" id="letter-title" class="input-field" placeholder="Titre...">
                    <input type="date" id="letter-unlock-date" class="input-field date-input" title="Date d'ouverture">
                    <button onclick="addLetter()" class="btn-action action-pink">+</button>
                </div>
                <textarea id="letter-content" class="input-field text-area" placeholder="Ecris ta lettre ici..."></textarea>
                <div id="list-inbox" class="letter-list"></div>
                <div id="list-sent" class="letter-list hidden"></div>
            </div>
        </div>

        <div class="card" id="card-album">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>üì∏</span> Nos Albums</div>
            </div>
            <div class="card-content">
                <div class="polaroid-container">
                    <div class="polaroid" onclick="openGallery('fr')">
                        <img id="polaroid-img-fr" class="polaroid-img">
                        <div class="polaroid-label">Th√©o</div>
                        <div id="btn-add-fr" class="add-photo-btn" onclick="event.stopPropagation();document.getElementById('file-fr').click()">+ Ajouter photo</div>
                        <input type="file" id="file-fr" accept="image/*" onchange="handlePhotoUpload(this,'fr')" style="display:none;">
                    </div>
                    <div class="polaroid" onclick="openGallery('tw')">
                        <img id="polaroid-img-tw" class="polaroid-img">
                        <div class="polaroid-label">Elise</div>
                        <div id="btn-add-tw" class="add-photo-btn" onclick="event.stopPropagation();document.getElementById('file-tw').click()">+ Ajouter photo</div>
                        <input type="file" id="file-tw" accept="image/*" onchange="handlePhotoUpload(this,'tw')" style="display:none;">
                    </div>
                </div>
            </div>
        </div>

        <div class="card" id="card-todo">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>üìù</span> Nos Projets</div>
            </div>
            <div class="card-content">
                <div class="todo-tabs">
                    <div class="todo-tab tab-dist active" id="t-tab-dist" onclick="switchTodoTab('dist')">√Ä Distance</div>
                    <div class="todo-tab tab-real" id="t-tab-real" onclick="switchTodoTab('real')">Retrouvailles</div>
                </div>
                <div class="prog-label-row">
                    <span id="prog-label">R√©alisations √† distance</span>
                    <span id="todo-percent">0%</span>
                </div>
                <div class="book-progress-track" id="prog-track">
                    <div id="todo-progress-bar" class="book-progress-bar"></div>
                </div>
                <div class="new-todo-box">
                    <div class="todo-helper-text">Nouvelle id√©e :</div>
                    <div class="cat-selector" id="todo-cat-selector"></div>
                    <div class="input-group mb-0">
                        <input type="text" id="todo-input" class="input-field input-white" placeholder="Qu'on fait ensemble...">
                        <button onclick="addTodo()" class="btn-action small-btn">+</button>
                    </div>
                </div>
                <div id="todo-list"></div>
            </div>
        </div>

        <div class="card" id="card-books">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>üìö</span> Lectures Communes</div>
            </div>
            <div class="card-content">
                <div class="input-group">
                    <input type="text" id="book-title" class="input-field" placeholder="Titre...">
                    <input type="number" id="book-pages" class="input-field small-input" placeholder="Total P.">
                    <button onclick="addBook()" class="btn-action">+</button>
                </div>
                <div id="book-list"></div>
            </div>
        </div>

        <div class="card" id="card-games">
            <div class="card-title toggleable" onclick="toggleCard(this)">
                <div class="card-head-wrap"><span>üéÆ</span> Salle de Jeux</div>
            </div>
            <div class="card-content">
                
                <div class="game-selector">
                    <button id="btn-pendu" onclick="toggleGame('pendu')" class="game-btn">
                        Pendu <span class="game-indicator"></span>
                    </button>
                    <button id="btn-p4" onclick="toggleGame('p4')" class="game-btn">
                        P4 <span class="game-indicator"></span>
                    </button>
                    <button id="btn-uno" onclick="toggleGame('uno')" class="game-btn">
                        Uno <span class="game-indicator"></span>
                    </button>
                    <button id="btn-bac" onclick="toggleGame('bac')" class="game-btn">
                        Bac <span class="game-indicator"></span>
                    </button>
                </div>
                
                <div id="pendu-box" class="game-block">
                    <div class="game-header">
                        <div class="game-title-text">Pendu</div>
                        <button class="game-close-btn" onclick="toggleGame('pendu')">‚úï</button>
                    </div>
                    <canvas id="pendu-canvas" width="200" height="150"></canvas>
                    <div id="pendu-word-display" class="pendu-word">_ _ _ _ _</div>
                    <div id="pendu-status" class="status-msg">En attente...</div>
                    
                    <div id="pendu-setup">
                        <input type="text" id="pendu-secret" class="input-field" placeholder="Mot secret (sans accent)">
                        <button onclick="startPendu()" class="btn-action" id="pendu-start-btn">Lancer</button>
                    </div>
                    
                    <div id="pendu-restart-area" style="display:none;margin-top:10px;">
                        <button onclick="startPenduSetup()" class="btn-action blue-bg full-width">Rejouer</button>
                    </div>
                    <div id="pendu-keyboard" class="keyboard" style="display:none;"></div>
                    <div class="history-box" id="pendu-history-list"></div>
                </div>
                
                <div id="p4-box" class="game-block">
                    <div class="game-header">
                        <div class="game-title-text">Puissance 4</div>
                        <button class="game-close-btn" onclick="toggleGame('p4')">‚úï</button>
                    </div>
                    <div id="p4-status" class="status-msg">En attente...</div>
                    
                    <button id="p4-restart-btn" onclick="initP4()" class="btn-action" disabled>Nouvelle Partie</button>
                    
                    <div class="p4-grid" id="p4-grid"></div>
                    <div class="history-box" id="p4-history-list"></div>
                </div>

                <div id="uno-box" class="game-block">
                    <div class="game-header">
                        <div class="game-title-text">UNO</div>
                        <button class="game-close-btn" onclick="toggleGame('uno')">‚úï</button>
                    </div>
                    <div id="uno-status" class="status-msg">Bienvenue au Uno !</div>
                    <div class="uno-board">
                        <div class="uno-top-info">
                            <span id="uno-opponent-name">Adversaire</span> : <span id="uno-opponent-count">0</span> cartes
                        </div>
                        <div class="uno-table">
                            <div class="uno-card back" onclick="drawUnoCard()" title="Piocher">UNO</div>
                            <div id="uno-discard-pile"></div>
                        </div>
                        <div class="uno-hand" id="uno-player-hand"></div>
                    </div>
                    <button id="uno-restart-btn" onclick="initUno()" class="btn-action blue-btn full-width mt-10" disabled>Nouvelle Partie</button>
                    <div class="history-box" id="uno-history-list"></div>
                </div>

               <div id="bac-box" class="game-block">
                    <div class="game-header">
                        <div class="game-title-text">Petit Bac</div>
                        <button class="game-close-btn" onclick="toggleGame('bac')">‚úï</button>
                    </div>
                    <div id="bac-lobby" class="text-center py-20"></div>
                    <div id="bac-game" class="hidden">
                        <div class="bac-letter-sticky" id="bac-current-letter">?</div>
                        <div id="bac-inputs"></div>
                        <div class="bac-actions">
                            <button onclick="bacTryFinish()" class="btn-action flex-1 blue-bg">Termin√© !</button>
                            <button onclick="bacVoteSkip()" id="bac-btn-skip" class="btn-action flex-1 orange-bg">On passe ?</button>
                        </div>
                    </div>
                    <div id="bac-review" class="hidden">
                        <div id="bac-review-list"></div>
                        <div id="bac-review-actions" class="mt-20"></div>
                    </div>
                    <div id="bac-finished" class="hidden text-center">
                        <div class="winner-icon" id="bac-winner-icon">üèÜ</div>
                        <div class="winner-text" id="bac-winner-text">Gagnant</div>
                        <div class="score-text" id="bac-score-text">Score</div>
                        <div id="bac-results-table-container"></div>
                        <button onclick="bacReset()" class="btn-action gradient-btn full-width">Fin de partie</button>
                    </div>
                    <div class="history-box mt-20" id="bac-history-list"></div>
                </div>
            </div>
        </div>
        
        <div class="app-footer">
            <div class="footer-content">
                <img src="icon.jpg" class="footer-logo">
                <a href="https://open.spotify.com/playlist/20Gmofuoy7FuEydcKOhpOH?si=SRo1hgXVRZCn-jymg_k18A&pi=-AZabbkXR3Ocj" target="_blank" class="spotify-link">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg" class="spotify-icon">
                </a>
            </div>
            <div class="footer-version">Love Travel v85 ‚Ä¢ janvier 2026</div>
        </div>
    </div>

    <div id="upload-choice-modal">
        <div class="modal-content">
            <div class="emoji-large">ü´£</div>
            <h3>Cacher cette photo ?</h3>
            <p>Veux-tu activer le <b>Mode Grattage</b> pour en faire une surprise ? üéÅ</p>
            <div class="btn-group-vertical">
                <button onclick="confirmUpload(true)" class="btn-action pink-btn">Oui, c'est une surprise ! üéÅ</button>
                <button onclick="confirmUpload(false)" class="btn-action neutral-btn">Non, photo normale üì∑</button>
            </div>
            <button onclick="cancelUpload()" class="link-cancel">Annuler</button>
        </div>
    </div>

    <div id="scratch-modal">
        <div class="scratch-title">Gratte pour d√©couvrir ! ‚ú®</div>
        <div class="scratch-area">
            <img id="scratch-img-target" src="">
            <canvas id="scratch-canvas" width="300" height="300"></canvas>
        </div>
        <button onclick="document.getElementById('scratch-modal').style.display='none'" class="btn-cancel-scratch">Annuler</button>
    </div>
    
    <div id="cycle-edit-modal" onclick="if(event.target===this)this.style.display='none'">
        <div class="modal-content relative">
            <button onclick="document.getElementById('cycle-edit-modal').style.display='none'" class="close-modal-btn">‚úï</button>
            <div class="emoji-large">üå∏</div>
            <h3 class="cycle-title">Mon Cycle</h3>
            <p class="cycle-desc">Si le calcul est d√©cal√©, entre le jour actuel (1 √† 28) pour corriger.</p>
            <div class="cycle-input-row">
                <button onclick="adjustCycleInput(-1)" class="cycle-adj-btn">-</button>
                <input type="number" id="cycle-input-val" value="1" min="1" max="28">
                <button onclick="adjustCycleInput(1)" class="cycle-adj-btn">+</button>
            </div>
            <button onclick="saveCycleChange()" class="btn-action gradient-btn">Valider la correction</button>
            <div class="reset-cycle-link" onclick="resetCycleFull()">C'est le 1er jour de mes r√®gles (J-1)</div>
        </div>
    </div>

    <div id="jackpot-modal" onclick="this.style.display='none'">
        <div class="jackpot-card">
            <img src="icon.jpg" class="jackpot-img">
            <div class="jackpot-text">Jackpot mon amour ! ‚ù§Ô∏è</div>
        </div>
        <div class="jackpot-hint">(Tape pour fermer)</div>
    </div>
    
    <div id="uno-color-modal">
        <div class="color-picker-box">
            <h3>Choisis une couleur</h3>
            <div class="cp-options">
                <div class="cp-circle red" onclick="chooseUnoColor('red')"></div>
                <div class="cp-circle blue" onclick="chooseUnoColor('blue')"></div>
                <div class="cp-circle green" onclick="chooseUnoColor('green')"></div>
                <div class="cp-circle yellow" onclick="chooseUnoColor('yellow')"></div>
            </div>
        </div>
    </div>

    <div id="custom-mood-modal" style="display:none;">
        <div class="custom-mood-box">
            <div class="emoji-header">‚ú®</div>
            <h3 class="mood-modal-title">Ton mood actuel ?</h3>
            <p class="mood-modal-desc">Dis √† l'autre ce que tu ressens...</p>
            
            <input type="text" id="custom-mood-input" class="input-field mood-input" placeholder="Ex: Je pense √† toi..." maxlength="30" autocomplete="off">
            
            <div class="mood-actions">
                <button onclick="closeCustomMood()" class="btn-action neutral-btn">Annuler</button>
                <button onclick="confirmCustomMood()" class="btn-action pink-btn">Valider</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>

</body>
</html>
